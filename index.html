<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø§Ù„Ø±ÙÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</title>
<link href="https://fonts.googleapis.com/css2?family=Aref+Ruqaa:wght@700&display=swap" rel="stylesheet">  
     <link href="https://fonts.googleapis.com/css2?family=Reem+Kufi+Fun:wght@700&display=swap" rel="stylesheet">
     <link href="https://fonts.googleapis.com/css2?family=El+Messiri:wght@700&display=swap" rel="stylesheet">

     <style>
    :root{
      --bg1:#140141;
      --bg2:#0b5757;
      --bg3:#030e0b;
      --card:rgba(8, 4, 48, 0.62);
      --stroke:rgba(15,23,42,.12);
      --text:#0f172a;
      --muted:rgba(15,23,42,.62);
      --green:#290b35;
      --gold:#d4af37;
      --shadow: 0 14px 40px rgba(2,6,23,.08);
      --radius: 18px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
 font-family: 'El Messiri', sans-serif;      color:var(--text);
      background: linear-gradient(160deg, var(--bg1), var(--bg2), var(--bg3));
      min-height:100vh;
    }
    a,button,input{ font-family:inherit; }
    .wrap{ max-width: 1040px; margin: 0 auto; padding: 22px 16px 50px; }
             
    .topbar{
     display:flex;
     flex-direction:column;
     align-items:center;
     justify-content:center;
     gap:7px;
     margin-top: 10px;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
    }
    /* ===== Ø£Ø²Ø±Ø§Ø± ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ ===== */
.authBtn{
  width:100%;
  padding: 12px 16px;
  border-radius: 14px;
  border: 1px solid rgba(16,185,129,.35);

  background: linear-gradient(135deg, rgba(16,185,129,.15), rgba(212,175,55,.15));
  backdrop-filter: blur(6px);

  font-weight: 800;
  font-size: 14px;
  color: rgba(15,23,42,.9);

  cursor:pointer;
  transition: all .25s ease;
  box-shadow: 0 12px 30px rgba(2,6,23,.06);
}

.authBtn:hover{
  transform: translateY(-2px);
  box-shadow: 0 18px 35px rgba(2,6,23,.10);
  background: linear-gradient(135deg, rgba(16,185,129,.25), rgba(212,175,55,.25));
}

.authBtn:active{
  transform: scale(.98);
}
    .logo{
      width:54px; height:54px; border-radius:16px;
      background: radial-gradient(circle at 30% 20%, rgba(212,175,55,.35), transparent 60%),
                  radial-gradient(circle at 75% 60%, rgba(16,185,129,.20), transparent 60%),
                  rgba(255,255,255,.65);
      border:1px solid var(--stroke);
      box-shadow: 0 10px 25px rgba(2,6,23,.06);
      display:grid; place-items:center;
      overflow:hidden;
    }
    .brand h1{
      margin:0; font-size: 25px; letter-spacing:.2px;
    }
    .brand p{ margin:2px 0 0; font-size:12px; color:var(--muted); }
.pillbar{
  display:flex;
  gap:5px;
  flex-wrap:wrap;
  justify-content:center;
}    .pill{
      border:0px solid var(--stroke);
      background: rgba(255,255,255,.55);
      padding: 8px 12px;
      border-radius: 999px;
      box-shadow: 0 8px 20px rgba(2,6,23,.04);
      font-size: 12px;
      color: rgba(15,23,42,.75);
      display:flex; align-items:center; gap:8px;
    }
   .toolbarBtn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:6px;

  padding: 10px 16px;
  min-height: 1px;

  border-radius: 500px;
  border: 0px solid rgba(15,23,42,.12);

  background: rgba(255, 255, 255, 0.11);
  backdrop-filter: blur(6px);

  font-weight: 700;
  font-size: px;
  color: rgba(15,23,42,.85);

  cursor:pointer;
  transition: all .25s ease;
  box-shadow: 0 8px 24px rgba(2,6,23,.05);
}

.toolbarBtn:hover{
  transform: translateY(-2px);
  background: rgba(255, 255, 255, 0.151);
  box-shadow: 0 14px 30px rgba(2,6,23,.08);
}

.toolbarBtn:active{
  transform: scale(.98);
}

.toolbarBtn.active{
  border-color: rgba(16,185,129,.35);
  background: rgba(16,185,129,.12);
}

.toolbarBtn.danger{
  border-color: rgba(239,68,68,.30);
  background: rgba(239,68,68,.10);
}
    .grid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 16px;
      align-items:start;
    }
    @media (max-width: 980px){
      .grid{ grid-template-columns: 1fr; }
    }
    .card{
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .card::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(circle at 12% 20%, rgba(212,175,55,.22), transparent 55%),
        radial-gradient(circle at 86% 30%, rgba(16,185,129,.18), transparent 55%);
      pointer-events:none;
      opacity:.9;
    }
    .card > *{ position:relative; }
    .cardHead{
      padding: 16px 16px 10px;
      display:flex; align-items:flex-start; justify-content:space-between; gap: 12px;
      border-bottom: 1px solid rgba(15,23,42,.08);
      background: rgba(255,255,255,.22);
    }
    .cardTitle{ margin:0; font-size: 15px; }
    .cardSub{ margin:6px 0 0; color: var(--muted); font-size: 12px; line-height:1.6; }
    .cardBody{ padding: 14px 16px 16px; }

    /* Auth */
    .authBox{
      max-width: 520px;
      margin: 48px auto 0;
    }
    .authTabs{
      display:flex; gap:10px;
      padding: 10px;
    }
    .tab{
      flex:1;
      padding: 10px 12px;
      border-radius: 999px;
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.55);
      cursor:pointer;
      font-weight:700;
      color: rgba(15,23,42,.78);
      transition: background .2s ease;
    }
    .tab.active{
      background: rgba(16,185,129,.12);
      border-color: rgba(16,185,129,.28);
    }
    .form{
      padding: 14px 16px 16px;
      display:grid;
      gap: 10px;
    }
    .field{
      display:grid; gap: 6px;
    }
    label{ font-size: 12px; color: rgba(15,23,42,.75); }
    input{
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.14);
      outline: none;
      background: rgba(255,255,255,.75);
      transition: box-shadow .2s ease, border-color .2s ease;
    }
    input:focus{
      border-color: rgba(16,185,129,.45);
      box-shadow: 0 0 0 4px rgba(16,185,129,.14);
    }
    .row{
      display:flex; gap: 10px; flex-wrap:wrap;
      align-items:center; justify-content:space-between;
    }
    .hint{
      font-size: 12px; color: var(--muted); line-height:1.6;
    }
    .msg{
      margin-top: 6px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.55);
      font-size: 12px;
      color: rgba(15,23,42,.8);
      display:none;
    }
    .msg.show{ display:block; }
    .toast{
      position: fixed;
      inset: auto 16px 16px 16px;
      display:flex;
      justify-content:center;
      pointer-events:none;
      z-index: 50;
    }
    .toast > div{
      pointer-events:none;
      max-width: 520px;
      width: 100%;
      padding: 12px 14px;
      border-radius: 16px;
      border: 1px solid rgba(16,185,129,.25);
      background: rgba(255,255,255,.75);
      box-shadow: 0 18px 40px rgba(2,6,23,.12);
      font-size: 13px;
      color: rgba(15,23,42,.85);
      opacity: 0;
      transform: translateY(8px);
      transition: opacity .25s ease, transform .25s ease;
    }
    .toast.show > div{
      opacity: 1;
      transform: translateY(0px);
    }

    /* Progress */
    .progressWrap{
      display:flex; align-items:center; justify-content:space-between; gap: 12px; flex-wrap:wrap;
      margin-bottom: 12px;
    }
    .progressBar{
      width:100%;
      height: 12px;
      border-radius: 999px;
      background: rgba(15,23,42,.08);
      border: 1px solid rgba(15,23,42,.10);
      overflow:hidden;
    }
    .progressFill{
      height:100%;
      width:0%;
      border-radius: 999px;
      background: linear-gradient(90deg, rgba(16,185,129,.55), rgba(212,175,55,.35));
      box-shadow: 0 0 24px rgba(16,185,129,.18);
      transition: width .35s ease;
    }

    /* Juz grid */
    .juzGrid{
      display:grid;
      grid-template-columns: repeat(6, minmax(0, 1fr));
      gap: 10px;
    }
    @media (max-width: 520px){
      .juzGrid{ grid-template-columns: repeat(5, minmax(0, 1fr)); }
    }
    .juzBtn{
      position:relative;
      border-radius: 18px;
      padding: 12px 10px;
      cursor:pointer;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.55);
      transition: transform .12s ease, box-shadow .25s ease, background .25s ease, border-color .25s ease;
      overflow:hidden;
      min-height: 68px;
    }
    .juzBtn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.72);
      box-shadow: 0 14px 30px rgba(2,6,23,.08);
    }
    .juzBtn:active{ transform: translateY(0px) scale(.99); }
    .juzBtn .small{ font-size: 11px; color: rgba(15,23,42,.55); }
    .juzBtn .num{ font-weight: 800; font-size: 18px; margin-top: 4px; }

    .juzBtn.done{
      background: rgba(16,185,129,.12);
      border-color: rgba(16,185,129,.28);
      box-shadow: 0 0 28px rgba(16,185,129,.16);
    }
    .juzBtn.done::after{
      content:"";
      position:absolute;
      inset:-1px;
      background: radial-gradient(circle at 20% 10%, rgba(255,255,255,.45), transparent 55%);
      opacity: .9;
      pointer-events:none;
    }
    .check{
      margin-top: 6px;
      font-size: 11px;
      color: rgba(5,150,105,.95);
      font-weight: 700;
    }

    /* Leaderboard */
    .lbList{ display:grid; gap: 10px; }
    .lbRow{
      display:flex; align-items:center; justify-content:space-between; gap: 12px;
      padding: 12px 12px;
      border-radius: 16px;
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.5);
    }
    .lbLeft{ display:flex; align-items:center; gap: 10px; }
    .rank{
      width: 30px; height: 30px;
      border-radius: 999px;
      display:grid; place-items:center;
      border: 1px solid rgba(15,23,42,.12);
      background: rgba(255,255,255,.65);
      font-weight: 800;
      color: rgba(15,23,42,.78);
    }
    .name{
      font-weight: 800;
      font-size: 13px;
    }
    .meta{
      font-size: 11px;
      color: rgba(15,23,42,.62);
      margin-top: 2px;
    }
    .score{
      font-weight: 900;
      color: rgba(15,23,42,.82);
    }

    /* Decorative header scene */
    .scene{
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      margin-bottom: 16px;
      padding: 14px 16px;
      border-radius: var(--radius);
      border: 1px solid rgba(15,23,42,.10);
      background: rgba(255,255,255,.45);
      box-shadow: 0 10px 30px rgba(2,6,23,.05);
      overflow:hidden;
      position:relative;
    }
    .scene::before{
      content:"";
      position:absolute; inset:-1px;
      background:
        radial-gradient(circle at 12% 60%, rgba(212,175,55,.12), transparent 55%),
        radial-gradient(circle at 80% 10%, rgba(16,185,129,.10), transparent 55%);
      pointer-events:none;
    }
    .khatmaTag{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:4px;
  min-width: 56px;
  padding: 8px 10px;
  border-radius: 16px;
  border: 1px solid rgba(212,175,55,.28);
  background: rgba(212,175,55,.10);
  box-shadow: 0 10px 24px rgba(2,6,23,.06);
}

.khatmaTag .crown{
  font-size: 16px;
  line-height: 1;
}

.khatmaTag .num{
  font-weight: 900;
  font-size: 14px;
  color: rgba(15,23,42,.86);
  line-height: 1;
}

.khatmaTag .label{
  font-size: 10px;
  color: rgba(15,23,42,.60);
  margin-top: -2px;
}
.heroHeader{
  text-align:center;
  margin-bottom: 50px;
  padding-top: 10px;
}

.heroMoon{
  margin-bottom: 10px;
  animation: floatMoon 6s ease-in-out infinite;
}

.heroTitle{
   font-family: 'Reem Kufi Fun', sans-serif;
font-size: clamp(80px, 6vw, 80px);  font-weight: 90;
  margin: 0;
  background: linear-gradient(90deg, #39e9ae, #0d023f);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.heroSub{
  margin-top: 5px;
  font-size: 14px;
  color: rgba(15,23,42,.6);

   font-family: 'El Messiri', sans-serif;;}

@media (max-width: 600px){
  .heroTitle{
    font-size: 70px;
  }
}

@keyframes floatMoon{
  0%{ transform: translateY(0px); }
  50%{ transform: translateY(-4px); }
  100%{ transform: translateY(0px); }
}
    .scene > *{ position:relative; }
    .sceneTitle{ margin:0; font-size: 14px; font-weight:900; }
    .sceneSub{ margin:6px 0 0; font-size: 12px; color: var(--muted); line-height:1.6; }
    .svgWrap{ width: 150px; opacity:.95; }

    .hide{ display:none !important; }
  </style>
</head>

<body>
  <div class="wrap">
    
        <div class="heroHeader">
            <div class="topbar"></div>
  <div class="heroMoon">
    <svg viewBox="200 200 200 160" width="140">
      <defs>
        <linearGradient id="ramadanMoon" x1="20" y1="20" x2="160" y2="140">
          <stop stop-color="#FFD84D"/>
          <stop offset="" stop-color="#E6B800"/>
        </linearGradient>
      </defs>

      

      <!-- Ù†Ø¬ÙˆÙ… -->
     
    </svg>
  </div>

  <h1 class="heroTitle">Ø§Ù„Ø±ÙÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</h1>
  <p class="heroSub">Ù…Ù†Ø° 1446 Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø´ÙŠØ® Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù‚Ù„</p>
</div>
     <!-- <div class="brand">
        <div class="logo" aria-hidden="true">
           Ù‡Ù„Ø§Ù„ ÙˆÙ†Ø¬ÙˆÙ… Ø¨Ø³ÙŠØ· 
          <svg width="44" height="44" viewBox="0 0 44 44" fill="none">
            <defs>
              <linearGradient id="g1" x1="6" y1="10" x2="36" y2="36" gradientUnits="userSpaceOnUse">
                <stop stop-color="rgba(16,185,129,.95)"/>
                <stop offset="1" stop-color="rgba(212,175,55,.95)"/>
              </linearGradient>
            </defs>
            <path d="M28.5 9.2c-6.8 1.1-12 6.9-12 14 0 7.8 6.3 14.1 14.1 14.1 3 0 5.8-.9 8.1-2.4-2.1 3.4-5.9 5.6-10.2 5.6-6.7 0-12.1-5.4-12.1-12.1 0-7.2 6-13 13.2-13.2Z" fill="url(#g1)" opacity=".92"/>
            <circle cx="12" cy="12" r="1.6" fill="rgba(212,175,55,.9)"/>
            <circle cx="10" cy="20" r="1.1" fill="rgba(212,175,55,.75)"/>
            <circle cx="17" cy="9" r="1.1" fill="rgba(212,175,55,.75)"/>
          </svg>
        </div>
        <div>
          <h1>Ø§Ù„Ø±ÙÙŠÙ‚ Ø§Ù„Ù‚Ø±Ø¢Ù†ÙŠ</h1>
          <p>Ù…Ù†Ø° 1446   Ø¨Ù‚ÙŠØ§Ø¯Ø© Ø§Ù„Ø´ÙŠØ® Ù…Ø­Ù…Ø¯ Ø§Ù„Ø¹Ù‚Ù„</p>
        </div>
      </div>-->

      <div class="pillbar">
        <div class="pill" id="whoPill">ØºÙŠØ± Ù…Ø³Ø¬Ù„</div>
        <button class="toolbarBtn" id="gotoAppBtn">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</button>
        <button class="toolbarBtn" id="gotoLbBtn">Ø§Ù„Ù„ÙŠØ¯Ø± Ø¨ÙˆØ±Ø¯</button>

        <button class="toolbarBtn danger hide" id="logoutBtn">ØªØ³Ø¬ÙŠÙ„ Ø®Ø±ÙˆØ¬</button>
      </div>
    </div>

    <!-- AUTH VIEW -->
    <div class="authBox card" id="authView">
      <div class="cardHead">
        <div>
          <h2 class="cardTitle"> Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ø³Ù„ÙŠÙ„ Ù„ÙˆÙ„ÙˆÙ‡ ÙˆØ§Ø¨Ø±Ø§Ù‡ÙŠÙ… </h2>
          <p class="cardSub">Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø£Ùˆ Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ù‹Ø§ .</p>
        </div>
      </div>

      <div class="authTabs">
        <button class="tab active" id="tabLogin">ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„</button>
        <button class="tab" id="tabRegister">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</button>
      </div>

      <div class="form" id="loginForm">
        <div class="field">
          <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù…Ø«Ø§Ù„: fay)</label>
          <input id="loginUser" autocomplete="username" placeholder="Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…" />
        </div>
        <div class="field">
          <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
          <input id="loginPass" type="password" autocomplete="current-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        </div>
        <div class="row">
          <button class="authBtn" id="loginBtn">Ø¯Ø®ÙˆÙ„</button>
         <!---- <span class="hint">Ù†ØµÙŠØ­Ø©: Ø§Ø®ØªØ§Ø±ÙˆØ§ Ø£Ø³Ù…Ø§Ø¡ ÙˆØ§Ø¶Ø­Ø© ()</span>-->
        </div>
        <div class="msg" id="loginMsg"></div>
      </div>

      <div class="form hide" id="registerForm">
        <div class="field">
          <label>Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø¸Ø§Ù‡Ø±</label>
          <input id="regName" placeholder="Ù…Ø«Ø§Ù„: ÙÙŠ" />
        </div>
        <div class="field">
          <label>Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ù…Ù…ÙŠØ²)</label>
          <input id="regUser" autocomplete="username" placeholder="Ù…Ø«Ø§Ù„: fay" />
        </div>
        <div class="field">
          <label>ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±</label>
          <input id="regPass" type="password" autocomplete="new-password" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
        </div>
        <div class="row">
          <button class="authBtn" id="registerBtn">Ø¥Ù†Ø´Ø§Ø¡</button>
          <span class="hint">Ø³ÙŠØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯ ÙˆØ­ÙØ¸Ù‡ Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…ØªØµÙØ­.</span>
        </div>
        <div class="msg" id="regMsg"></div>
      </div>
    </div>

    <!-- APP VIEW -->
    <div class="grid hide" id="appView">
      <div class="card">
        <div class="cardHead">
          <div>
            <h2 class="cardTitle" id="helloTitle">Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©</h2>
           <!----> <p class="cardSub">Ø§Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ø²Ø¡ Ø¹Ù†Ø¯ Ø¥ÙƒÙ…Ø§Ù„Ù‡ (ÙŠÙ…ÙƒÙ†Ùƒ Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø¨Ø§Ù„Ø¶ØºØ· Ù…Ø±Ø© Ø£Ø®Ø±Ù‰).</p>
          </div>
        </div>

        <div class="cardBody">
          <div class="scene">
            <div>
              <p class="sceneTitle">Ù‡Ø¯ÙÙ†Ø§ Ø§Ù† ÙŠØ®ØªÙ… ÙƒÙ„ Ù…ØªØ³Ø§Ø¨Ù‚ Ù…Ø±Ø© ÙˆØ§Ø­Ø¯Ù‡ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ù‚Ù„</p>
            <!---- <p class="sceneSub">ØªØ§Ø¨Ø¹ Ø£Ø¬Ø²Ø§Ø¡Ùƒ ÙŠÙˆÙ…ÙŠÙ‹Ø§. ÙƒÙ„ Ø¶ØºØ· ÙŠØ­ÙØ¸ Ø­Ø§Ù„ØªÙƒ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§.</p> -->
            </div>
            <div class="svgWrap" aria-hidden="true">
              <svg viewBox="0 0 260 11" width="150" height="50">
                <defs>
                  <linearGradient id="moon" x1="40" y1="20" x2="120" y2="90" gradientUnits="userSpaceOnUse">
                    <stop stop-color="rgba(212,175,55,.95)"/>
                    <stop offset="1" stop-color="rgba(16,185,129,.9)"/>
                  </linearGradient>
                </defs>
                <path 

/>
              </svg>
            </div>
          </div>

          <div class="progressWrap">
            <div class="pill" id="progressPill">0 / 30</div>
            <div class="pill" id="percentPill">0%</div>
          </div>
          <div class="progressBar" aria-label="Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ‚Ø¯Ù…">
            <div class="progressFill" id="progressFill"></div>
          </div>

          <div style="height:12px"></div>

          <div class="juzGrid" id="juzGrid"></div>
        </div>
      </div>

      <div class="card">
        <div class="cardHead">
          <div>
            <h2 class="cardTitle">Ø§Ù„Ù‚Ø±Ø§Ø¡</h2>
            <p class="cardSub">Ø³Ø§Ø¨Ù‚Ù†Ø§ Ø¹Ù„Ù‰ Ø§Ù„Ø¬Ù†Ù‡.</p>
          </div>
        </div>
        <div class="cardBody">
          <div class="lbList" id="lbList"></div>
        </div>
      </div>
    </div>

    <!-- LEADERBOARD ONLY VIEW -->
    <div class="card hide" id="lbOnlyView">
      <div class="cardHead">
        <div>
          <h2 class="cardTitle">Ø³Ø§Ø­Ø© Ø§Ù„ØµØ¯Ø§Ø±Ø©  </h2>
          <p class="cardSub">ØªØ±ØªÙŠØ¨ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ† Ø§Ù„Ù…Ø³Ø¬Ù„ÙŠÙ† Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­.</p>
        </div>
      </div>
      <div class="cardBody">
        <div class="lbList" id="lbListOnly"></div>
      </div>
    </div>

  </div>

  <div class="toast" id="toast"><div></div></div>

<script>
/** =========================
 *  ØªØ®Ø²ÙŠÙ† Ù…Ø­Ù„ÙŠ Ø¨Ø³ÙŠØ· (localStorage)
 *  ========================= */
const LS_USERS = "rq_users_v1";     // { username: {displayName, pass, progress:[1..30]} }
const LS_SESSION = "rq_session_v1"; // { username }

function loadUsers(){
  try { return JSON.parse(localStorage.getItem(LS_USERS) || "{}"); }
  catch { return {}; }
}
function saveUsers(users){
  localStorage.setItem(LS_USERS, JSON.stringify(users));
}
function getSession(){
  try { return JSON.parse(localStorage.getItem(LS_SESSION) || "null"); }
  catch { return null; }
}
function setSession(sess){
  localStorage.setItem(LS_SESSION, JSON.stringify(sess));
}
function clearSession(){
  localStorage.removeItem(LS_SESSION);
}

/** =========================
 *  Ø£Ø¯ÙˆØ§Øª ØµØºÙŠØ±Ø©
 *  ========================= */
const $ = (id) => document.getElementById(id);

function toast(msg){
  const t = $("toast");
  t.querySelector("div").textContent = msg;
  t.classList.add("show");
  setTimeout(()=> t.classList.remove("show"), 1800);
}
function normalizeUsername(u){
  return (u || "").trim().toLowerCase().replace(/\s+/g,"");
}
function clamp(n,min,max){ return Math.max(min, Math.min(max, n)); }

/** =========================
 *  Ø¹Ù†Ø§ØµØ± Ø§Ù„ÙˆØ§Ø¬Ù‡Ø©
 *  ========================= */
const authView = $("authView");
const appView = $("appView");
const lbOnlyView = $("lbOnlyView");

const whoPill = $("whoPill");
const logoutBtn = $("logoutBtn");
const gotoAppBtn = $("gotoAppBtn");
const gotoLbBtn = $("gotoLbBtn");

const tabLogin = $("tabLogin");
const tabRegister = $("tabRegister");
const loginForm = $("loginForm");
const registerForm = $("registerForm");
const loginMsg = $("loginMsg");
const regMsg = $("regMsg");

const helloTitle = $("helloTitle");
const progressPill = $("progressPill");
const percentPill = $("percentPill");
const progressFill = $("progressFill");
const juzGrid = $("juzGrid");

const lbList = $("lbList");
const lbListOnly = $("lbListOnly");

let currentUser = null;

/** =========================
 *  Ø¹Ø±Ø¶/Ø¥Ø®ÙØ§Ø¡
 *  ========================= */
function showAuth(){
  authView.classList.remove("hide");
  appView.classList.add("hide");
  lbOnlyView.classList.add("hide");
}
function showApp(){
  authView.classList.add("hide");
  appView.classList.remove("hide");
  lbOnlyView.classList.add("hide");
}
function showLbOnly(){
  authView.classList.add("hide");
  appView.classList.add("hide");
  lbOnlyView.classList.remove("hide");
}

/** =========================
 *  ØªØ¨ÙˆÙŠØ¨Ø§Øª Auth
 *  ========================= */
tabLogin.onclick = () => {
  tabLogin.classList.add("active");
  tabRegister.classList.remove("active");
  loginForm.classList.remove("hide");
  registerForm.classList.add("hide");
  loginMsg.classList.remove("show");
  regMsg.classList.remove("show");
};
tabRegister.onclick = () => {
  tabRegister.classList.add("active");
  tabLogin.classList.remove("active");
  registerForm.classList.remove("hide");
  loginForm.classList.add("hide");
  loginMsg.classList.remove("show");
  regMsg.classList.remove("show");
};

/** =========================
 *  ØªØ³Ø¬ÙŠÙ„/Ø¯Ø®ÙˆÙ„
 *  ========================= */
$("registerBtn").onclick = () => {
  const displayName = ($("regName").value || "").trim();
  const usernameRaw = $("regUser").value;
  const username = normalizeUsername(usernameRaw);
  const pass = $("regPass").value || "";

  const users = loadUsers();

  if(!displayName || !username || pass.length < 4){
    regMsg.textContent = "ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø§Ø³Ù…ØŒ ÙˆØ§Ø³Ù… Ù…Ø³ØªØ®Ø¯Ù…ØŒ ÙˆÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± (4 Ø£Ø­Ø±Ù ÙØ£ÙƒØ«Ø±).";
    regMsg.classList.add("show");
    return;
  }
  if(users[username]){
    regMsg.textContent = "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø³Ø¨Ù‚Ù‹Ø§. Ø§Ø®ØªØ± Ø§Ø³Ù…Ù‹Ø§ Ø¢Ø®Ø±.";
    regMsg.classList.add("show");
    return;
  }

  users[username] = { displayName, pass, progress: [], khatmat: 0 };
  saveUsers(users);

  regMsg.textContent = "ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ âœ… Ø§Ù„Ø¢Ù† Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ.";
  regMsg.classList.add("show");
  toast("ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ ğŸŒ™");
  // Ø§Ù†ØªÙ‚Ù„ Ù„ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„
  tabLogin.click();
  $("loginUser").value = username;
  $("loginPass").value = "";
};

$("loginBtn").onclick = () => {
  const username = normalizeUsername($("loginUser").value);
  const pass = $("loginPass").value || "";
  const users = loadUsers();

  if(!users[username] || users[username].pass !== pass){
    loginMsg.textContent = "Ø§Ø³Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ùˆ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± ØµØ­ÙŠØ­Ø©.";
    loginMsg.classList.add("show");
    return;
  }

  setSession({ username });
  currentUser = username;
  loginMsg.classList.remove("show");
  toast("Ø£Ù‡Ù„Ù‹Ø§ ÙˆØ³Ù‡Ù„Ù‹Ø§ ğŸŒ™");
  renderAll();
  showApp();
};

logoutBtn.onclick = () => {
  clearSession();
  currentUser = null;
  toast("ØªÙ… ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬");
  renderAll();
  showAuth();
};

/** =========================
 *  ØªÙ†Ù‚Ù„ Ø¹Ù„ÙˆÙŠ
 *  ========================= */
gotoAppBtn.onclick = () => {
  const sess = getSession();
  if(!sess){ showAuth(); toast("Ø³Ø¬Ù‘Ù„ Ø¯Ø®ÙˆÙ„Ùƒ Ø£ÙˆÙ„Ù‹Ø§"); return; }
  showApp();
  renderAll();
};
gotoLbBtn.onclick = () => {
  // Ù„ÙŠØ¯Ø± Ø¨ÙˆØ±Ø¯ Ø¨Ø¯ÙˆÙ† Ø§Ù„Ø­Ø§Ø¬Ø© Ù„ØªØ³Ø¬ÙŠÙ„ Ø¯Ø®ÙˆÙ„
  showLbOnly();
  renderLeaderboard(lbListOnly, null);
};

/** =========================
 *  Ø¥Ù†Ø´Ø§Ø¡ Ø´Ø¨ÙƒØ© Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡
 *  ========================= */
function buildJuzGrid(){
  juzGrid.innerHTML = "";
  for(let i=1;i<=30;i++){
    const btn = document.createElement("button");
    btn.className = "juzBtn";
    btn.dataset.juz = String(i);
    btn.innerHTML = `
      <div class="small">Ø§Ù„Ø¬Ø²Ø¡</div>
      <div class="num">${i}</div>
      <div class="check hide"></div>
    `;
    btn.onclick = () => toggleJuz(i);
    juzGrid.appendChild(btn);
  }
}

function toggleJuz(juz){
  const users = loadUsers();
  const u = users[currentUser];
  if(!u) return;

  const arr = Array.isArray(u.progress) ? u.progress : [];
  const idx = arr.indexOf(juz);

  if(idx === -1){
    arr.push(juz);
    arr.sort((a,b)=>a-b);
    u.progress = arr;
    saveUsers(users);
    showRandomMessage();
  }else{
    // ÙŠØ³Ù…Ø­ Ø¨Ø§Ù„Ø¥Ù„ØºØ§Ø¡ Ø¨Ø§Ù„Ø¶ØºØ· Ù…Ø±Ø© Ø£Ø®Ø±Ù‰
    arr.splice(idx,1);
    u.progress = arr;
    saveUsers(users);
    toast("ØªÙ… Ø¥Ù„ØºØ§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ¯");
  }
    // Ø¥Ø°Ø§ Ø§ÙƒØªÙ…Ù„Øª Ø§Ù„Ø®ØªÙ…Ø© (30/30) => Ø²ÙØ¯ Ø¹Ø¯Ø¯ Ø§Ù„Ø®ØªÙ…Ø§Øª ÙˆØ§Ø¨Ø¯Ø£ Ø®ØªÙ…Ø© Ø¬Ø¯ÙŠØ¯Ø©
  if ((u.progress || []).length === 30) {
    u.khatmat = Number(u.khatmat || 0) + 1;
    u.progress = []; // ÙŠØ¨Ø¯Ø£ Ø®ØªÙ…Ø© Ø¬Ø¯ÙŠØ¯Ø©
    saveUsers(users);
    toast(" ğŸ‰Ù…Ø§Ø´Ø§Ø¡Ø§Ù„Ù„Ù‡ğŸ‰");
  }
  renderAll();
}

/** =========================
 *  ØªÙ‚Ø¯Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
 *  ========================= */
function renderProgress(){
  const users = loadUsers();
  const u = users[currentUser];
  const name = u?.displayName || "";

  helloTitle.textContent = `Ø£Ù‡Ù„Ù‹Ø§ ÙŠØ§ ${name} ğŸŒ™`;

  const done = (u?.progress || []).length;
  const pct = Math.round((done/30)*100);

  progressPill.textContent = `${done} / 30`;
  percentPill.textContent = `${pct}%`;
  progressFill.style.width = `${clamp(pct,0,100)}%`;

  // ØªØ­Ø¯ÙŠØ« Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø´Ø¨ÙƒØ©
  const doneSet = new Set(u?.progress || []);
  [...juzGrid.querySelectorAll(".juzBtn")].forEach((btn)=>{
    const j = Number(btn.dataset.juz);
    const isDone = doneSet.has(j);
    btn.classList.toggle("done", isDone);
    const check = btn.querySelector(".check");
    if(check) check.classList.toggle("hide", !isDone);
  });

  // Ø¥Ø°Ø§ Ø§ÙƒØªÙ…Ù„
  if(done === 30){
    toast("Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡! Ø®ØªÙ…Øª Ø§Ù„Ù‚Ø±Ø¢Ù† ğŸ‰ğŸŒ™");
  }
}

/** =========================
 *  Ù„ÙŠØ¯Ø± Ø¨ÙˆØ±Ø¯
 *  ========================= */
function renderLeaderboard(container, highlightUser){
  const users = loadUsers();

  const rows = Object.entries(users).map(([username, data]) => {
    const count = Array.isArray(data.progress) ? data.progress.length : 0;
    const khatmat = Number(data.khatmat || 0);
    return {
      username,
      displayName: data.displayName || username,
      count,
      khatmat
    };
  });

  // ØªØ±ØªÙŠØ¨: Ø®ØªÙ…Ø§Øª Ø£ÙˆÙ„Ø§Ù‹ØŒ Ø«Ù… Ø§Ù„Ø£Ø¬Ø²Ø§Ø¡ØŒ Ø«Ù… Ø§Ù„Ø§Ø³Ù…
  rows.sort((a, b) => {
    if (b.khatmat !== a.khatmat) return b.khatmat - a.khatmat;
    if (b.count !== a.count) return b.count - a.count;
    return a.displayName.localeCompare(b.displayName, "ar");
  });

  container.innerHTML = "";
  if(rows.length === 0){
    container.innerHTML = `<div class="hint">Ù„Ø§ ÙŠÙˆØ¬Ø¯ Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ† Ø¨Ø¹Ø¯. Ø£Ù†Ø´Ø¦ Ø­Ø³Ø§Ø¨Ù‹Ø§ Ø£ÙˆÙ„Ù‹Ø§.</div>`;
    return;
  }

  rows.forEach((r, idx) => {
    const el = document.createElement("div");
    el.className = "lbRow";

    const isMe = highlightUser && r.username === highlightUser;
    el.style.borderColor = isMe ? "rgba(16,185,129,.32)" : "rgba(15,23,42,.10)";
    el.style.background   = isMe ? "rgba(16,185,129,.08)" : "rgba(255,255,255,.5)";

    const pct = Math.round((r.count / 30) * 100);
    const medal = idx===0 ? "ğŸ¥‡" : idx===1 ? "ğŸ¥ˆ" : idx===2 ? "ğŸ¥‰" : "â­";

    el.innerHTML = `
      <div class="lbLeft">
        <div class="rank">${idx + 1}</div>
        <div>
          <div class="name">${medal} ${escapeHtml(r.displayName)}${isMe ? " (Ø£Ù†Øª)" : ""}</div>
          <div class="meta">${r.count} / 30 â€” ${pct}%</div>
        </div>
      </div>

      <div class="khatmaTag" title="Ø¹Ø¯Ø¯ Ø§Ù„Ø®ØªÙ…Ø§Øª">
        <div class="crown"> ğŸ‘‘</div>
        <div class="num">${r.khatmat}</div>
        <div class="label"></div>
      </div>
    `;

    container.appendChild(el);
  });

  
}
function showRandomMessage(){
  const messages = [
    "Ø¨Ø§Ø±Ùƒ Ø§Ù„Ù„Ù‡ ÙÙŠÙƒ ",
    "Ù…Ø§ Ø´Ø§Ø¡ Ø§Ù„Ù„Ù‡ Ø¹Ù„ÙŠÙƒ",
    "ØªÙ‚Ø¨Ù„ Ø§Ù„Ù„Ù‡ Ù‚Ø±Ø§Ø¡ØªÙƒ ",
    "Ù†ÙˆØ± Ø§Ù„Ù„Ù‡ Ù‚Ù„Ø¨Ùƒ ",
    "Ø²Ø§Ø¯Ùƒ Ø§Ù„Ù„Ù‡ Ù‚Ø±Ø¨Ù‹Ø§ ",
    "Ø§Ø³ØªÙ…Ø± ",
    "Ø®Ø·ÙˆØ© Ù…Ø¨Ø§Ø±ÙƒØ© ",
    "Ø´Ø·ÙˆØ±",
    "Ù…Ù…ØªØ§Ø²",
  ];

  const random = messages[Math.floor(Math.random() * messages.length)];
  toast(random);
}

function escapeHtml(s){
  return String(s)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

/** =========================
 *  Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ØªÙ‚Ø¯Ù‘Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø§Ù„Ø­Ø§Ù„ÙŠ
 *  ========================= */
/*$("resetBtn").onclick = () => {
  const users = loadUsers();
  const u = users[currentUser];
  if(!u) return;

  const ok = confirm("Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø¶Ø¨Ø· ØªÙ‚Ø¯Ù…ÙƒØŸ Ø³ÙŠØªÙ… Ù…Ø³Ø­ Ø£Ø¬Ø²Ø§Ø¡Ùƒ Ø§Ù„Ù…ÙƒØªÙ…Ù„Ø© Ù„Ù‡Ø°Ø§ Ø§Ù„Ø­Ø³Ø§Ø¨ ÙÙ‚Ø·.");
  if(!ok) return;

  u.progress = [];
  saveUsers(users);
  toast("ØªÙ…Øª Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¶Ø¨Ø·");
  renderAll();
};*/

/** =========================
 *  ØªØ­Ø¯ÙŠØ« Ø´Ø±ÙŠØ· Ø§Ù„Ø­Ø§Ù„Ø©
 *  ========================= */
function renderTopPill(){
  const sess = getSession();
  const users = loadUsers();

  if(sess?.username && users[sess.username]){
    currentUser = sess.username;
    whoPill.textContent = `Ù…Ø³Ø¬Ù„: ${users[currentUser].displayName}`;
    logoutBtn.classList.remove("hide");
  }else{
    currentUser = null;
    whoPill.textContent = "ØºÙŠØ± Ù…Ø³Ø¬Ù„";
    logoutBtn.classList.add("hide");
  }
}

/** =========================
 *  Ø±Ù†Ø¯Ø± Ø´Ø§Ù…Ù„
 *  ========================= */
function renderAll(){
  renderTopPill();

  // Ø±Ù†Ø¯Ø± Ù„ÙŠØ¯Ø± Ø¨ÙˆØ±Ø¯ (ÙŠÙ…ÙŠÙ† Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©)
  renderLeaderboard(lbList, currentUser);

  // Ø¥Ø°Ø§ Ø¯Ø§Ø®Ù„ Ù„ÙˆØ­Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©
  if(!appView.classList.contains("hide")){
    if(!currentUser){
      showAuth();
      return;
    }
    renderProgress();
  }
}

/** =========================
 *  ØªØ´ØºÙŠÙ„ Ø£ÙˆÙ„ÙŠ
 *  ========================= */
buildJuzGrid();

(function init(){
  const sess = getSession();
  const users = loadUsers();

  renderTopPill();

  if(sess?.username && users[sess.username]){
    showApp();
    renderAll();
  }else{
    showAuth();
  }

  // Ù„ÙŠØ¯Ø± Ø¨ÙˆØ±Ø¯ ÙÙŠ ØµÙØ­Ø© Ù…Ø³ØªÙ‚Ù„Ø©
  renderLeaderboard(lbListOnly, null);
})();
</script>
</body>
</html>